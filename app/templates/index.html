{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto bg-gray-800 rounded-xl shadow-lg p-6">
    <div class="flex items-center justify-center mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 5070 2792" fill="rgb(23%, 67%, 96%)" fill-opacity="1">
            <path fill-rule="nonzero" d="M 1440.28125 0.28125 C 874.324219 0.28125 412.859375 461.738281 412.863281 1027.699219 C 412.871094 1075.351562 421.835938 1122.25 428.4375 1169.371094 C 164.34375 1361.621094 0.523438 1664.589844 0.515625 1994.585938 C 0.519531 2286.617188 124.945312 2565.011719 342.46875 2759.863281 C 365.386719 2780.394531 395.074219 2791.75 425.84375 2791.757812 L 4644.179688 2791.757812 C 4674.941406 2791.75 4704.628906 2780.394531 4727.550781 2759.863281 C 4945.070312 2565.011719 5069.429688 2286.617188 5069.429688 1994.585938 C 5069.429688 1428.628906 4607.96875 967.101562 4042.019531 967.101562 C 4033.738281 967.101562 4025.511719 968.078125 4017.238281 968.28125 C 3719.078125 525.789062 3221.410156 255.890625 2684.519531 255.890625 C 2517.238281 255.921875 2352.621094 287.308594 2193.691406 338.378906 C 2000.058594 127.070312 1729.699219 0.28125 1440.429688 0.28125 Z M 1440.28125 250.261719 C 1682.011719 250.261719 1909.78125 362.488281 2056.980469 554.230469 C 2090.609375 598.03125 2148.980469 614.578125 2200.589844 594.949219 C 2355.109375 536.109375 2519.089844 505.960938 2684.441406 505.941406 C 3160.261719 505.941406 3601.03125 754.261719 3847.601562 1161.21875 C 3872.519531 1202.359375 3918.851562 1225.550781 3966.71875 1220.851562 C 3991.75 1218.398438 4016.871094 1217.160156 4042.019531 1217.140625 C 4472.859375 1217.148438 4819.460938 1563.738281 4819.460938 1994.585938 C 4819.449219 2201.171875 4734.699219 2396.363281 4589.578125 2541.710938 L 480.4375 2541.710938 C 335.316406 2396.363281 250.5625 2201.171875 250.5625 1994.585938 C 250.566406 1722.871094 392.054688 1471.28125 624.265625 1330.191406 C 670.035156 1302.378906 693.003906 1248.5 681.382812 1196.230469 C 669.078125 1140.878906 662.847656 1084.390625 662.835938 1027.699219 C 662.835938 596.851562 1009.429688 250.261719 1440.28125 250.25 Z M 1440.28125 250.261719 "/>
        </svg>
        <h1 class="text-2xl font-bold text-white ml-3">Погода</h1>
    </div>
    <form method="post" action="/weather" class="flex flex-col gap-4" autocomplete="off">
        <div class="relative">
            <input
                id="city-input"
                name="city"
                placeholder="Введите город"
                value="{{ last_city or city or '' }}"
                autocomplete="off"
                class="w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400"
                aria-autocomplete="list"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="autocomplete-list"
                aria-activedescendant=""
                role="combobox"
            >
            <ul id="autocomplete-list"
                class="absolute z-10 w-full bg-gray-700 rounded-b-lg max-h-48 overflow-auto hidden"></ul>
        </div>
        <button type="submit"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200">
            Узнать погоду
        </button>
    </form>

    {% if forecast %}
    <div class="mt-6 p-4 bg-gray-900 rounded-lg">
        <h2 class="text-xl font-semibold text-white flex items-center">
            <svg class="w-6 h-6 text-yellow-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                 xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
            Текущая погода в {{ city }}
        </h2>
        {% if forecast.error %}
            <p class="text-red-400 mt-2">{{ forecast.error }}</p>
        {% else %}
            <div class="mt-4 space-y-2">
                <p class="flex items-center text-gray-200">
                    <svg width="24" height="24" viewBox="0 0 1024 1024" class="icon mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M570.8 742c0.5-2.9 0.9-5.8 0.9-8.8V418.5H458.4v314.6c0 3 0.4 5.9 0.9 8.8-34.3 19.5-57.5 56.3-57.5 98.5 0 62.6 50.7 113.3 113.3 113.3 62.6 0 113.3-50.7 113.3-113.3-0.1-42.2-23.3-79-57.6-98.4z" fill="#F59558" />
                        <path d="M594.3 730.3V194.8c0-43.7-35.6-79.3-79.3-79.3s-79.3 35.6-79.3 79.3v535.4c-35.2 25.4-56.6 66.5-56.6 110.2 0 75 61 135.9 135.9 135.9s136-60.8 136-135.8c0-43.7-21.4-84.8-56.7-110.2zM515 931.1c-50 0-90.6-40.6-90.6-90.6 0-32.1 17.4-62.1 45.3-78.4 7-4 11.3-11.5 11.3-19.6v-40.8h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481v-45.3h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481v-45.3h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481V498h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481v-45.3h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481v-45.3h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481V226h11.3c6.3 0 11.3-5.1 11.3-11.3 0-6.3-5.1-11.3-11.3-11.3H481v-8.5c0-18.7 15.2-34 34-34 18.7 0 34 15.2 34 34v547.7c0 8.1 4.3 15.6 11.3 19.6 28 16.2 45.3 46.2 45.3 78.4 0.1 49.9-40.6 90.5-90.6 90.5z" fill="#211F1E" />
                    </svg>
                    Температура: {{ forecast.temperature }}°C
                </p>
                
                <p class="flex items-center text-gray-200">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#3B82F6" xmlns="http://www.w3.org/2000/svg" class="mr-2">
                        <path d="M18.5 22.75C16.16 22.75 14.25 20.84 14.25 18.5V18C14.25 17.59 14.59 17.25 15 17.25C15.41 17.25 15.75 17.59 15.75 18V18.5C15.75 20.02 16.98 21.25 18.5 21.25C20.02 21.25 21.25 20.02 21.25 18.5C21.25 16.98 20.02 15.75 18.5 15.75H2C1.59 15.75 1.25 15.41 1.25 15C1.25 14.59 1.59 14.25 2 14.25H18.5C20.84 14.25 22.75 16.16 22.75 18.5C22.75 20.84 20.84 22.75 18.5 22.75Z"/>
                        <path d="M18.5 12.75H2C1.59 12.75 1.25 12.41 1.25 12C1.25 11.59 1.59 11.25 2 11.25H18.5C20.02 11.25 21.25 10.02 21.25 8.5C21.25 6.98 20.02 5.75 18.5 5.75C16.98 5.75 15.75 6.98 15.75 8.5V9C15.75 9.41 15.41 9.75 15 9.75C14.59 9.75 14.25 9.41 14.25 9V8.5C14.25 6.16 16.16 4.25 18.5 4.25C20.84 4.25 22.75 6.16 22.75 8.5C22.75 10.84 20.84 12.75 18.5 12.75Z"/>
                        <path d="M9.31 9.75109H2C1.59 9.75109 1.25 9.41109 1.25 9.00109C1.25 8.59109 1.59 8.25109 2 8.25109H9.31C10.38 8.25109 11.25 7.38109 11.25 6.31109C11.25 5.24109 10.38 4.37109 9.31 4.37109C8.24 4.37109 7.37 5.24109 7.37 6.31109V6.69109C7.37 7.10109 7.03 7.44109 6.62 7.44109C6.21 7.44109 5.87 7.11109 5.87 6.69109V6.31109C5.87 4.41109 7.41 2.87109 9.31 2.87109C11.21 2.87109 12.75 4.41109 12.75 6.31109C12.75 8.21109 11.21 9.75109 9.31 9.75109Z"/>
                    </svg>
                    Ветер: {{ forecast.windspeed }} км/ч
                </p>
            </div>
        {% endif %}
    </div>
    {% endif %}
</div>

<script src='/static/js/autocomplete.js'></script>
{% endblock %}
